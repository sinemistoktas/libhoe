<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>libhoe üåø</title>

<style>
    body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        background-color: #dff7e2;
        color: #2d4638;
        text-align: center;
    }

    header {
        padding: 40px 20px;
        position: relative;
    }

    /* Upload Books Button (top right) */
    #uploadBtn {
        position: absolute;
        top: 20px;
        right: 25px;
        padding: 10px 18px;
        background: #baf1c2;
        color: #1f3528;
        border-radius: 12px;
        font-weight: 600;
        text-decoration: none;
        transition: 0.2s;
        box-shadow: 0 0 8px rgba(120, 180, 130, 0.4);
    }

    #uploadBtn:hover {
        background: #9fe8ad;
        transform: scale(1.05);
    }

    h1 {
        font-size: 3rem;
        color: #2d4638;
        margin-bottom: 5px;
    }

    p {
        opacity: 0.7;
        margin: 0;
    }

    #explorer {
        max-width: 900px;
        margin: 0 auto;
        background: #ffffffcc;
        padding: 20px;
        border-radius: 20px;
        box-shadow: 0 0 20px rgba(150, 200, 160, 0.4);
    }

    .item {
        padding: 12px;
        margin: 8px 0;
        background: #ecfdf1;
        border-radius: 12px;
        cursor: pointer;
        transition: 0.2s ease;
    }

    .item:hover {
        background: #c8f5d3;
    }

    .folder {
        font-weight: 600;
    }

    iframe {
        width: 100%;
        height: 600px;
        border: none;
        margin-top: 20px;
        border-radius: 14px;
    }
</style>

</head>
<body>

<header>
    <a id="uploadBtn" href="https://drive.google.com/drive/folders/1kv4S8VJT26mEgxpm-IxfPAh7KaJv6cyt?usp=sharing" target="_blank">
        ‚ûï Upload Books
    </a>

    <h1>libhoe</h1>
    <p>friendly neighborhood library corner üçÄ</p>
</header>

<h2 style="
    display:inline-block;
    background:#c8f5d3;
    padding:8px 20px;
    border-radius:20px;
    font-weight:600;
    color:#1f3528;
">
    Book Collection üìö
</h2>

<div id="explorer">Loading...</div>

<iframe id="previewFrame" style="display:none;"></iframe>

<script>
// CONFIG
const API_KEY = "AIzaSyBqlgleWtNUB2cuQ2LnEnJL4yKXyey4khg";
const ROOT_FOLDER = "19c7Nidkl7gw9C3oDeGCGXHKRhWeMYkSE";

// Google Drive API endpoint
const API_URL = "https://www.googleapis.com/drive/v3/files";

async function listFiles(folderId) {
    const url = `${API_URL}?q='${folderId}' in parents&fields=files(id,name,mimeType)&key=${API_KEY}`;
    const res = await fetch(url);
    const data = await res.json();
    return data.files;
}

async function loadFolder(folderId) {
    const explorer = document.getElementById("explorer");
    explorer.innerHTML = "Loading...";

    const files = await listFiles(folderId);

    explorer.innerHTML = "";

    // Back button if not root
    if (folderId !== ROOT_FOLDER) {
        const backBtn = document.createElement("div");
        backBtn.className = "item";
        backBtn.innerHTML = "‚¨Ö Back";
        backBtn.onclick = () => loadFolder(ROOT_FOLDER);
        explorer.appendChild(backBtn);
    }

    files.forEach(file => {
        const div = document.createElement("div");
        div.className = "item";

        if (file.mimeType === "application/vnd.google-apps.folder") {
            div.classList.add("folder");
            div.innerHTML = "üìÅ " + file.name;
            div.onclick = () => loadFolder(file.id);
        } else {
            div.innerHTML = "üìÑ " + file.name;
            div.onclick = () => previewFile(file.id);
        }

        explorer.appendChild(div);
    });
}

function previewFile(fileId) {
    const iframe = document.getElementById("previewFrame");
    iframe.style.display = "block";
    iframe.src = `https://drive.google.com/file/d/${fileId}/preview`;
    iframe.scrollIntoView({ behavior: "smooth" });
}

// Load homepage folder
loadFolder(ROOT_FOLDER);

</script>

</body>
</html>
